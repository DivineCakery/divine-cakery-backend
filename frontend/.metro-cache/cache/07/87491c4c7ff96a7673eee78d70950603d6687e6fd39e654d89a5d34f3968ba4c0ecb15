{"dependencies":[{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":36,"index":36}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":37},"end":{"line":2,"column":44,"index":81}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":123},"end":{"line":4,"column":39,"index":162}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"../store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":163},"end":{"line":5,"column":40,"index":203}}],"key":"dKKzYqIQKYpDjB3XCyXC/s+wXSc=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":204},"end":{"line":6,"column":41,"index":245}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"../components/ForceUpdateModal","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":246},"end":{"line":7,"column":62,"index":308}}],"key":"vhKU3aa1qtubhhghYGVKlgol0oY=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/_layout.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return RootLayout;\n    }\n  });\n  var _expoRouter = require(_dependencyMap[0], \"expo-router\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[2], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _expoConstants = require(_dependencyMap[3], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _store = require(_dependencyMap[4], \"../store\");\n  var _servicesApi = require(_dependencyMap[5], \"../services/api\");\n  var apiService = _interopDefault(_servicesApi);\n  var _componentsForceUpdateModal = require(_dependencyMap[6], \"../components/ForceUpdateModal\");\n  var ForceUpdateModal = _interopDefault(_componentsForceUpdateModal);\n  var _reactJsxDevRuntime = require(_dependencyMap[7], \"react/jsx-dev-runtime\");\n  function RootLayout() {\n    const loadUser = (0, _store.useAuthStore)(state => state.loadUser);\n    const [showForceUpdate, setShowForceUpdate] = (0, _react.useState)(false);\n    const [currentVersion, setCurrentVersion] = (0, _react.useState)('');\n    const [requiredVersion, setRequiredVersion] = (0, _react.useState)('');\n    const [updateMessage, setUpdateMessage] = (0, _react.useState)('');\n    (0, _react.useEffect)(() => {\n      loadUser();\n      checkForForceUpdate();\n    }, []);\n    const checkForForceUpdate = async () => {\n      try {\n        // Only check on Android\n        if (Platform.default.OS !== 'android') {\n          return;\n        }\n\n        // Get current app version\n        const currentVersionCode = Constants.default.expoConfig?.android?.versionCode || 0;\n        const currentVersionString = Constants.default.expoConfig?.version || '1.0.0';\n        setCurrentVersion(currentVersionString);\n        console.log('Force Update Check - Current version code:', currentVersionCode);\n\n        // Fetch version info from backend\n        const versionInfo = await apiService.default.getLatestAppVersion();\n        console.log('Force Update Check - Server response:', versionInfo);\n\n        // Check if force update is required\n        const minimumVersionCode = versionInfo.minimum_supported_version_code;\n        if (minimumVersionCode && currentVersionCode < minimumVersionCode) {\n          console.log('Force Update Required! Current:', currentVersionCode, 'Minimum:', minimumVersionCode);\n          setRequiredVersion(versionInfo.minimum_supported_version || versionInfo.latest_version);\n          setUpdateMessage(versionInfo.update_message);\n          setShowForceUpdate(true);\n        } else {\n          console.log('App is up to date or force update not required');\n        }\n      } catch (error) {\n        console.error('Error checking for force update:', error);\n        // Don't block app if we can't check - fail gracefully\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_reactJsxDevRuntime.Fragment, {\n      children: [/*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_expoRouter.Stack, {\n        screenOptions: {\n          headerShown: false\n        },\n        children: [/*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_expoRouter.Stack.Screen, {\n          name: \"index\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 9\n        }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_expoRouter.Stack.Screen, {\n          name: \"(auth)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 9\n        }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_expoRouter.Stack.Screen, {\n          name: \"(customer)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 9\n        }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_expoRouter.Stack.Screen, {\n          name: \"(admin)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 7\n      }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(ForceUpdateModal.default, {\n        visible: showForceUpdate,\n        currentVersion: currentVersion,\n        requiredVersion: requiredVersion,\n        updateMessage: updateMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true);\n  }\n});","lineCount":119,"map":[[13,2,9,15,"Object"],[13,8,9,15],[13,9,9,15,"defineProperty"],[13,23,9,15],[13,24,9,15,"exports"],[13,31,9,15],[14,4,9,15,"enumerable"],[14,14,9,15],[15,4,9,15,"get"],[15,7,9,15],[15,18,9,15,"get"],[15,19,9,15],[16,6,9,15],[16,13,9,15,"RootLayout"],[16,23,9,15],[17,4,9,15],[18,2,9,15],[19,2,1,0],[19,6,1,0,"_expoRouter"],[19,17,1,0],[19,20,1,0,"require"],[19,27,1,0],[19,28,1,0,"_dependencyMap"],[19,42,1,0],[20,2,2,0],[20,6,2,0,"_react"],[20,12,2,0],[20,15,2,0,"require"],[20,22,2,0],[20,23,2,0,"_dependencyMap"],[20,37,2,0],[21,2,2,44],[21,6,2,44,"_reactNativeWebDistExportsPlatform"],[21,40,2,44],[21,43,2,44,"require"],[21,50,2,44],[21,51,2,44,"_dependencyMap"],[21,65,2,44],[22,2,2,44],[22,6,2,44,"Platform"],[22,14,2,44],[22,17,2,44,"_interopDefault"],[22,32,2,44],[22,33,2,44,"_reactNativeWebDistExportsPlatform"],[22,67,2,44],[23,2,4,0],[23,6,4,0,"_expoConstants"],[23,20,4,0],[23,23,4,0,"require"],[23,30,4,0],[23,31,4,0,"_dependencyMap"],[23,45,4,0],[24,2,4,0],[24,6,4,0,"Constants"],[24,15,4,0],[24,18,4,0,"_interopDefault"],[24,33,4,0],[24,34,4,0,"_expoConstants"],[24,48,4,0],[25,2,5,0],[25,6,5,0,"_store"],[25,12,5,0],[25,15,5,0,"require"],[25,22,5,0],[25,23,5,0,"_dependencyMap"],[25,37,5,0],[26,2,6,0],[26,6,6,0,"_servicesApi"],[26,18,6,0],[26,21,6,0,"require"],[26,28,6,0],[26,29,6,0,"_dependencyMap"],[26,43,6,0],[27,2,6,0],[27,6,6,0,"apiService"],[27,16,6,0],[27,19,6,0,"_interopDefault"],[27,34,6,0],[27,35,6,0,"_servicesApi"],[27,47,6,0],[28,2,7,0],[28,6,7,0,"_componentsForceUpdateModal"],[28,33,7,0],[28,36,7,0,"require"],[28,43,7,0],[28,44,7,0,"_dependencyMap"],[28,58,7,0],[29,2,7,0],[29,6,7,0,"ForceUpdateModal"],[29,22,7,0],[29,25,7,0,"_interopDefault"],[29,40,7,0],[29,41,7,0,"_componentsForceUpdateModal"],[29,68,7,0],[30,2,7,62],[30,6,7,62,"_reactJsxDevRuntime"],[30,25,7,62],[30,28,7,62,"require"],[30,35,7,62],[30,36,7,62,"_dependencyMap"],[30,50,7,62],[31,2,9,15],[31,11,9,24,"RootLayout"],[31,21,9,34,"RootLayout"],[31,22,9,34],[31,24,9,37],[32,4,10,2],[32,10,10,8,"loadUser"],[32,18,10,16],[32,21,10,19],[32,25,10,19,"useAuthStore"],[32,31,10,31],[32,32,10,31,"useAuthStore"],[32,44,10,31],[32,46,10,33,"state"],[32,51,10,38],[32,55,10,43,"state"],[32,60,10,48],[32,61,10,49,"loadUser"],[32,69,10,57],[32,70,10,58],[33,4,11,2],[33,10,11,8],[33,11,11,9,"showForceUpdate"],[33,26,11,24],[33,28,11,26,"setShowForceUpdate"],[33,46,11,44],[33,47,11,45],[33,50,11,48],[33,54,11,48,"useState"],[33,60,11,56],[33,61,11,56,"useState"],[33,69,11,56],[33,71,11,57],[33,76,11,62],[33,77,11,63],[34,4,12,2],[34,10,12,8],[34,11,12,9,"currentVersion"],[34,25,12,23],[34,27,12,25,"setCurrentVersion"],[34,44,12,42],[34,45,12,43],[34,48,12,46],[34,52,12,46,"useState"],[34,58,12,54],[34,59,12,54,"useState"],[34,67,12,54],[34,69,12,55],[34,71,12,57],[34,72,12,58],[35,4,13,2],[35,10,13,8],[35,11,13,9,"requiredVersion"],[35,26,13,24],[35,28,13,26,"setRequiredVersion"],[35,46,13,44],[35,47,13,45],[35,50,13,48],[35,54,13,48,"useState"],[35,60,13,56],[35,61,13,56,"useState"],[35,69,13,56],[35,71,13,57],[35,73,13,59],[35,74,13,60],[36,4,14,2],[36,10,14,8],[36,11,14,9,"updateMessage"],[36,24,14,22],[36,26,14,24,"setUpdateMessage"],[36,42,14,40],[36,43,14,41],[36,46,14,44],[36,50,14,44,"useState"],[36,56,14,52],[36,57,14,52,"useState"],[36,65,14,52],[36,67,14,53],[36,69,14,55],[36,70,14,56],[37,4,16,2],[37,8,16,2,"useEffect"],[37,14,16,11],[37,15,16,11,"useEffect"],[37,24,16,11],[37,26,16,12],[37,32,16,18],[38,6,17,4,"loadUser"],[38,14,17,12],[38,15,17,13],[38,16,17,14],[39,6,18,4,"checkForForceUpdate"],[39,25,18,23],[39,26,18,24],[39,27,18,25],[40,4,19,2],[40,5,19,3],[40,7,19,5],[40,9,19,7],[40,10,19,8],[41,4,21,2],[41,10,21,8,"checkForForceUpdate"],[41,29,21,27],[41,32,21,30],[41,38,21,30,"checkForForceUpdate"],[41,39,21,30],[41,44,21,42],[42,6,22,4],[42,10,22,8],[43,8,23,6],[44,8,24,6],[44,12,24,10,"Platform"],[44,20,24,18],[44,21,24,18,"default"],[44,28,24,18],[44,29,24,19,"OS"],[44,31,24,21],[44,36,24,26],[44,45,24,35],[44,47,24,37],[45,10,25,8],[46,8,26,6],[48,8,28,6],[49,8,29,6],[49,14,29,12,"currentVersionCode"],[49,32,29,30],[49,35,29,33,"Constants"],[49,44,29,42],[49,45,29,42,"default"],[49,52,29,42],[49,53,29,43,"expoConfig"],[49,63,29,53],[49,65,29,55,"android"],[49,72,29,62],[49,74,29,64,"versionCode"],[49,85,29,75],[49,89,29,79],[49,90,29,80],[50,8,30,6],[50,14,30,12,"currentVersionString"],[50,34,30,32],[50,37,30,35,"Constants"],[50,46,30,44],[50,47,30,44,"default"],[50,54,30,44],[50,55,30,45,"expoConfig"],[50,65,30,55],[50,67,30,57,"version"],[50,74,30,64],[50,78,30,68],[50,85,30,75],[51,8,31,6,"setCurrentVersion"],[51,25,31,23],[51,26,31,24,"currentVersionString"],[51,46,31,44],[51,47,31,45],[52,8,33,6,"console"],[52,15,33,13],[52,16,33,14,"log"],[52,19,33,17],[52,20,33,18],[52,64,33,62],[52,66,33,64,"currentVersionCode"],[52,84,33,82],[52,85,33,83],[54,8,35,6],[55,8,36,6],[55,14,36,12,"versionInfo"],[55,25,36,23],[55,28,36,26],[55,34,36,32,"apiService"],[55,44,36,42],[55,45,36,42,"default"],[55,52,36,42],[55,53,36,43,"getLatestAppVersion"],[55,72,36,62],[55,73,36,63],[55,74,36,64],[56,8,37,6,"console"],[56,15,37,13],[56,16,37,14,"log"],[56,19,37,17],[56,20,37,18],[56,59,37,57],[56,61,37,59,"versionInfo"],[56,72,37,70],[56,73,37,71],[58,8,39,6],[59,8,40,6],[59,14,40,12,"minimumVersionCode"],[59,32,40,30],[59,35,40,33,"versionInfo"],[59,46,40,44],[59,47,40,45,"minimum_supported_version_code"],[59,77,40,75],[60,8,42,6],[60,12,42,10,"minimumVersionCode"],[60,30,42,28],[60,34,42,32,"currentVersionCode"],[60,52,42,50],[60,55,42,53,"minimumVersionCode"],[60,73,42,71],[60,75,42,73],[61,10,43,8,"console"],[61,17,43,15],[61,18,43,16,"log"],[61,21,43,19],[61,22,43,20],[61,55,43,53],[61,57,43,55,"currentVersionCode"],[61,75,43,73],[61,77,43,75],[61,87,43,85],[61,89,43,87,"minimumVersionCode"],[61,107,43,105],[61,108,43,106],[62,10,44,8,"setRequiredVersion"],[62,28,44,26],[62,29,44,27,"versionInfo"],[62,40,44,38],[62,41,44,39,"minimum_supported_version"],[62,66,44,64],[62,70,44,68,"versionInfo"],[62,81,44,79],[62,82,44,80,"latest_version"],[62,96,44,94],[62,97,44,95],[63,10,45,8,"setUpdateMessage"],[63,26,45,24],[63,27,45,25,"versionInfo"],[63,38,45,36],[63,39,45,37,"update_message"],[63,53,45,51],[63,54,45,52],[64,10,46,8,"setShowForceUpdate"],[64,28,46,26],[64,29,46,27],[64,33,46,31],[64,34,46,32],[65,8,47,6],[65,9,47,7],[65,15,47,13],[66,10,48,8,"console"],[66,17,48,15],[66,18,48,16,"log"],[66,21,48,19],[66,22,48,20],[66,70,48,68],[66,71,48,69],[67,8,49,6],[68,6,50,4],[68,7,50,5],[68,8,50,6],[68,15,50,13,"error"],[68,20,50,18],[68,22,50,20],[69,8,51,6,"console"],[69,15,51,13],[69,16,51,14,"error"],[69,21,51,19],[69,22,51,20],[69,56,51,54],[69,58,51,56,"error"],[69,63,51,61],[69,64,51,62],[70,8,52,6],[71,6,53,4],[72,4,54,2],[72,5,54,3],[73,4,56,2],[73,24,57,4],[73,28,57,4,"_reactJsxDevRuntime"],[73,47,57,4],[73,48,57,4,"jsxDEV"],[73,54,57,4],[73,56,57,4,"_reactJsxDevRuntime"],[73,75,57,4],[73,76,57,4,"Fragment"],[73,84,57,4],[74,6,57,4,"children"],[74,14,57,4],[74,30,58,6],[74,34,58,6,"_reactJsxDevRuntime"],[74,53,58,6],[74,54,58,6,"jsxDEV"],[74,60,58,6],[74,62,58,7,"_expoRouter"],[74,73,58,12],[74,74,58,12,"Stack"],[74,79,58,12],[75,8,58,13,"screenOptions"],[75,21,58,26],[75,23,58,28],[76,10,58,30,"headerShown"],[76,21,58,41],[76,23,58,43],[77,8,58,49],[77,9,58,51],[78,8,58,51,"children"],[78,16,58,51],[78,32,59,8],[78,36,59,8,"_reactJsxDevRuntime"],[78,55,59,8],[78,56,59,8,"jsxDEV"],[78,62,59,8],[78,64,59,9,"_expoRouter"],[78,75,59,14],[78,76,59,14,"Stack"],[78,81,59,14],[78,82,59,15,"Screen"],[78,88,59,21],[79,10,59,22,"name"],[79,14,59,26],[79,16,59,27],[80,8,59,34],[81,10,59,34,"fileName"],[81,18,59,34],[81,20,59,34,"_jsxFileName"],[81,32,59,34],[82,10,59,34,"lineNumber"],[82,20,59,34],[83,10,59,34,"columnNumber"],[83,22,59,34],[84,8,59,34],[84,15,59,36],[84,16,59,37],[84,31,60,8],[84,35,60,8,"_reactJsxDevRuntime"],[84,54,60,8],[84,55,60,8,"jsxDEV"],[84,61,60,8],[84,63,60,9,"_expoRouter"],[84,74,60,14],[84,75,60,14,"Stack"],[84,80,60,14],[84,81,60,15,"Screen"],[84,87,60,21],[85,10,60,22,"name"],[85,14,60,26],[85,16,60,27],[86,8,60,35],[87,10,60,35,"fileName"],[87,18,60,35],[87,20,60,35,"_jsxFileName"],[87,32,60,35],[88,10,60,35,"lineNumber"],[88,20,60,35],[89,10,60,35,"columnNumber"],[89,22,60,35],[90,8,60,35],[90,15,60,37],[90,16,60,38],[90,31,61,8],[90,35,61,8,"_reactJsxDevRuntime"],[90,54,61,8],[90,55,61,8,"jsxDEV"],[90,61,61,8],[90,63,61,9,"_expoRouter"],[90,74,61,14],[90,75,61,14,"Stack"],[90,80,61,14],[90,81,61,15,"Screen"],[90,87,61,21],[91,10,61,22,"name"],[91,14,61,26],[91,16,61,27],[92,8,61,39],[93,10,61,39,"fileName"],[93,18,61,39],[93,20,61,39,"_jsxFileName"],[93,32,61,39],[94,10,61,39,"lineNumber"],[94,20,61,39],[95,10,61,39,"columnNumber"],[95,22,61,39],[96,8,61,39],[96,15,61,41],[96,16,61,42],[96,31,62,8],[96,35,62,8,"_reactJsxDevRuntime"],[96,54,62,8],[96,55,62,8,"jsxDEV"],[96,61,62,8],[96,63,62,9,"_expoRouter"],[96,74,62,14],[96,75,62,14,"Stack"],[96,80,62,14],[96,81,62,15,"Screen"],[96,87,62,21],[97,10,62,22,"name"],[97,14,62,26],[97,16,62,27],[98,8,62,36],[99,10,62,36,"fileName"],[99,18,62,36],[99,20,62,36,"_jsxFileName"],[99,32,62,36],[100,10,62,36,"lineNumber"],[100,20,62,36],[101,10,62,36,"columnNumber"],[101,22,62,36],[102,8,62,36],[102,15,62,38],[102,16,62,39],[103,6,62,39],[104,8,62,39,"fileName"],[104,16,62,39],[104,18,62,39,"_jsxFileName"],[104,30,62,39],[105,8,62,39,"lineNumber"],[105,18,62,39],[106,8,62,39,"columnNumber"],[106,20,62,39],[107,6,62,39],[107,13,63,13],[107,14,63,14],[107,29,66,6],[107,33,66,6,"_reactJsxDevRuntime"],[107,52,66,6],[107,53,66,6,"jsxDEV"],[107,59,66,6],[107,61,66,7,"ForceUpdateModal"],[107,77,66,23],[107,78,66,23,"default"],[107,85,66,23],[108,8,67,8,"visible"],[108,15,67,15],[108,17,67,17,"showForceUpdate"],[108,32,67,33],[109,8,68,8,"currentVersion"],[109,22,68,22],[109,24,68,24,"currentVersion"],[109,38,68,39],[110,8,69,8,"requiredVersion"],[110,23,69,23],[110,25,69,25,"requiredVersion"],[110,40,69,41],[111,8,70,8,"updateMessage"],[111,21,70,21],[111,23,70,23,"updateMessage"],[112,6,70,37],[113,8,70,37,"fileName"],[113,16,70,37],[113,18,70,37,"_jsxFileName"],[113,30,70,37],[114,8,70,37,"lineNumber"],[114,18,70,37],[115,8,70,37,"columnNumber"],[115,20,70,37],[116,6,70,37],[116,13,71,7],[116,14,71,8],[117,4,71,8],[117,19,72,6],[117,20,72,7],[118,2,74,0],[119,0,74,1],[119,3]],"functionMap":{"names":["<global>","RootLayout","useAuthStore$argument_0","useEffect$argument_0","checkForForceUpdate"],"mappings":"AAA;eCQ;gCCC,yBD;YEM;GFG;8BGE;GHiC;CDoB"},"hasCjsExports":false},"type":"js/module"}]}